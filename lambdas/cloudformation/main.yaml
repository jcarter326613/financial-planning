Transform: 
  - AWS::Serverless-2016-10-31
  - Count

Parameters:
  BucketName:
    Type: String
    Description: The name of the S3 bucket
  BuildTag:
    Type: String
    Description: The part of the zip filename indicating the version to load
  EntryPoints:
    Type: CommaDelimitedList
    Description: A comma delimited list of entry points
  NumEntryPoints:
    Type: Number
    Description: The number of entrypoints in the EntryPoints parameter

Resources:
  Lambda:
    Type: AWS::CloudFormation::Stack
    Count: !Ref NumEntryPoints
    Properties:
      TemplateURL: sgegs
      Parameters:
        BucketName: !Ref BucketName
        BuildTag: !Ref BuildTag
        Handler: !Select
          - %d
          - !Ref EntryPoints
